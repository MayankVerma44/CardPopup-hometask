{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MAYANK\\\\cardpayment-implementation-hometask\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RevolutPayment = () => {\n  _s();\n  const [orderToken, setOrderToken] = useState('');\n  const [paymentStatus, setPaymentStatus] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Load Revolut Checkout script\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = 'https://cdn.revolut.com/revolut-checkout.js';\n    script.async = true;\n    document.body.appendChild(script);\n    return () => {\n      document.body.removeChild(script);\n    };\n  }, []);\n\n  // Create an order and get the token\n  const createOrder = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post('http://localhost:5000/api/create-order', {\n        amount: 500,\n        // Example amount in cents (500 = 5 GBP)\n        currency: 'GBP' // Example currency\n      });\n      console.log('Received order token:', response.data.token);\n      setOrderToken(response.data.token);\n\n      // Automatically trigger payment after getting token\n      handlePayment(response.data.token);\n    } catch (error) {\n      console.error('Error creating order:', error);\n      setError('Failed to create order. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle payment with the Revolut Checkout widget\n  const handlePayment = async token => {\n    if (!token) {\n      setError('No order token available');\n      return;\n    }\n    try {\n      // Wait for RevolutCheckout to be available\n      if (typeof window.RevolutCheckout === 'undefined') {\n        throw new Error('Revolut Checkout not loaded');\n      }\n      const RC = await window.RevolutCheckout(token);\n      const instance = await RC.payWithPopup({\n        locale: 'en',\n        mode: 'popup',\n        features: {\n          customerEmailRequired: true,\n          billingAddressRequired: false\n        },\n        onSuccess() {\n          setPaymentStatus('Payment successful!');\n          console.log('Payment successful');\n        },\n        onError(error) {\n          setPaymentStatus('Payment failed');\n          setError(`Payment failed: ${error.message}`);\n          console.error('Payment error:', error);\n        },\n        onCancel() {\n          setPaymentStatus('Payment cancelled');\n          console.log('Payment cancelled');\n        }\n      });\n    } catch (error) {\n      console.error('Error initializing payment:', error);\n      setError(`Failed to initialize payment: ${error.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-md mx-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: createOrder,\n        disabled: isLoading,\n        className: \"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:bg-blue-300\",\n        children: isLoading ? 'Processing...' : 'Pay with Revolut'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-600 bg-red-50 p-3 rounded\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), paymentStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-3 rounded ${paymentStatus.includes('successful') ? 'bg-green-50 text-green-600' : 'bg-yellow-50 text-yellow-600'}`,\n        children: paymentStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(RevolutPayment, \"/NKqGnG8rIsh9InVjO60pJnMrts=\");\n_c = RevolutPayment;\nexport default RevolutPayment;\nvar _c;\n$RefreshReg$(_c, \"RevolutPayment\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","RevolutPayment","_s","orderToken","setOrderToken","paymentStatus","setPaymentStatus","isLoading","setIsLoading","error","setError","script","document","createElement","src","async","body","appendChild","removeChild","createOrder","response","post","amount","currency","console","log","data","token","handlePayment","window","RevolutCheckout","Error","RC","instance","payWithPopup","locale","mode","features","customerEmailRequired","billingAddressRequired","onSuccess","onError","message","onCancel","className","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","includes","_c","$RefreshReg$"],"sources":["C:/Users/MAYANK/cardpayment-implementation-hometask/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst RevolutPayment = () => {\n  const [orderToken, setOrderToken] = useState('');\n  const [paymentStatus, setPaymentStatus] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Load Revolut Checkout script\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = 'https://cdn.revolut.com/revolut-checkout.js';\n    script.async = true;\n    document.body.appendChild(script);\n    return () => {\n      document.body.removeChild(script);\n    };\n  }, []);\n\n  // Create an order and get the token\n  const createOrder = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post('http://localhost:5000/api/create-order', {\n        amount: 500,    // Example amount in cents (500 = 5 GBP)\n        currency: 'GBP' // Example currency\n      });\n      \n      console.log('Received order token:', response.data.token);\n      setOrderToken(response.data.token);\n      \n      // Automatically trigger payment after getting token\n      handlePayment(response.data.token);\n    } catch (error) {\n      console.error('Error creating order:', error);\n      setError('Failed to create order. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle payment with the Revolut Checkout widget\n  const handlePayment = async (token) => {\n    if (!token) {\n      setError('No order token available');\n      return;\n    }\n\n    try {\n      // Wait for RevolutCheckout to be available\n      if (typeof window.RevolutCheckout === 'undefined') {\n        throw new Error('Revolut Checkout not loaded');\n      }\n\n      const RC = await window.RevolutCheckout(token);\n      \n      const instance = await RC.payWithPopup({\n        locale: 'en',\n        mode: 'popup',\n        features: {\n          customerEmailRequired: true,\n          billingAddressRequired: false\n        },\n        onSuccess() {\n          setPaymentStatus('Payment successful!');\n          console.log('Payment successful');\n        },\n        onError(error) {\n          setPaymentStatus('Payment failed');\n          setError(`Payment failed: ${error.message}`);\n          console.error('Payment error:', error);\n        },\n        onCancel() {\n          setPaymentStatus('Payment cancelled');\n          console.log('Payment cancelled');\n        }\n      });\n\n    } catch (error) {\n      console.error('Error initializing payment:', error);\n      setError(`Failed to initialize payment: ${error.message}`);\n    }\n  };\n\n  return (\n    <div className=\"p-4 max-w-md mx-auto\">\n      <div className=\"space-y-4\">\n        <button\n          onClick={createOrder}\n          disabled={isLoading}\n          className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:bg-blue-300\"\n        >\n          {isLoading ? 'Processing...' : 'Pay with Revolut'}\n        </button>\n\n        {error && (\n          <div className=\"text-red-600 bg-red-50 p-3 rounded\">\n            {error}\n          </div>\n        )}\n\n        {paymentStatus && (\n          <div className={`p-3 rounded ${\n            paymentStatus.includes('successful') \n              ? 'bg-green-50 text-green-600' \n              : 'bg-yellow-50 text-yellow-600'\n          }`}>\n            {paymentStatus}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RevolutPayment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}